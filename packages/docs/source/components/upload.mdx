---
title: Upload
summary: Availity component for uploading files
---

[![Version](https://img.shields.io/npm/v/@availity/upload.svg?style=for-the-badge)](https://www.npmjs.com/package/@availity/upload)

## Installation

```bash
npm install @availity/upload --save
```

## Usage

```jsx
import React from 'react';
import Upload from '@availity/upload';

<Upload clientId="a" bucketId="b" customerId="c" />;
```

#### Upload (Default export)

The default export is an all-in-one solution which handles uploads, encrypted file password requests and file state management for you.

## Props

| Prop Name                       | Types          | Required | Default                                                                                                       | Description                                                                                                                                                                                                         |
| -------------                   | -------        | -------- | --------                                                                                                      | --------------------------------------------------------------------------------------                                                                                                                              |
| **`btnText`**                   | Node           | false    | `+ Add File` for initial file or `+ Add Another File Attachment` if an attachment already have been selected. | The text which appears on the button.                                                                                                                                                                               |
| **`bucketId`**                  | String         | true     |                                                                                                               | The ID of the bucket you want to upload to.                                                                                                                                                                         |
| **`customerId`**                | String         | true     |                                                                                                               | The customer ID for the organization the user is uploading on behalf of.                                                                                                                                            |
| **`clientId`**                  | String         | true     |                                                                                                               | The ID obtained from APIConnect. Must be subscribed to the resumeable uploads API.                                                                                                                                  |
| **`allowedFileNameCharacters`** | String (regex) | false    |                                                                                                               | Restrict the file name characters to a regex set                                                                                                                                                                    |
| **`allowedFileTypes`**          | Array<String>  | false    |                                                                                                               | Restrict the file types allowed to be uploaded to. eg: `['.jpeg', '.jpg']`.                                                                                                                                         |
| **`onFileUpload`**              | Function       | false    |                                                                                                               | Callback called when file is uploaded. The callback will be provided the `Upload` instance from upload-core SDK. Use this callback to track files which have been uploaded (to get references returned by the API). |
| **`onFileRemove`**              | Function       | false    |                                                                                                               | Callback called when file is removed. The callback will be provided the `Upload` instance from upload-core SDK.                                                                                                     |
| **`maxSize`**                   | Number         | false    |                                                                                                               | The maximum file size (in bytes) for a file to be uploaded.                                                                                                                                                         |
| **`max`**                       | Number         | false    | unlimited                                                                                                     | The maximum number of files allowed to be uploaded. `0` (or a falsey value) means unlimited. When the max number has been reached the add button will disappear.                                                    |
| **`multiple`**                  | Boolean        | false    | `true`                                                                                                        | Indicates that the user will be allowed to select multiple files when selecting files from the OS prompt.                                                                                                           |
| **`showFileDrop`**              | Boolean        | false    | `false`                                                                                                       | Set as true to show a drag and drop file upload option instead of a button (file explorer still available on click).                                                                                                |

### Usage

```jsx
import React from 'react';
import Upload from '@availity/upload';

<Upload
  btnText="Upload a claim"
  clientId="a"
  bucketId="b"
  customerId="c"
  multiple={false}
  max={1}
/>
```

### Callback Function Usage

```jsx
<Upload
  btnText="Upload a claim"
  clientId="a"
  bucketId="b"
  customerId="c"
  onFileUpload={onUpload} // <-- add file callback function
  onFileRemove={onRemove} // <-- remove file callback function
  max={1}
/>

// onUpload callback definition
onUpload(upload) {
    if (upload) {
      upload.onSuccess.push(async () => {
        // success action
      });
      upload.onError.push(() => {
        // error action
      });
    }
  }
// ...

// onRemove callback definition
onRemove(file) {
  // remove action
}
```

## UploadProgressBar

The raw progress bar to be used when making your own.

### Props

| Prop Name        | Types                                                                                                       | Required | Default     | Description                                                                                                                                     |
| -------------    | -------                                                                                                     | -------- | --------    | --------------------------------------------------------------------------------------                                                          |
| **`upload`**     | Instance of Upload from [upload-core](https://github.com/Availity/sdk-js/tree/master/packages/upload-core). | true     |             | The upload instance returned by creating a `new Upload` via [upload-core](https://github.com/Availity/sdk-js/tree/master/packages/upload-core). |
| **`onProgress`** | Function                                                                                                    | false    |             | Callback function to hook into the `onProgress` within the Upload instance provided in the `upload` prop.                                       |
| **`onSuccess`**  | Function                                                                                                    | false    |             | Callback function to hook into the `onSuccess` within the Upload instance provided in the `upload` prop.                                        |
| **`complete`**   | Boolean                                                                                                     | false    |             | Triggers the "complete" style in the progress bar. When true, a checkmark appears at the end of the progress bar                                |
| **`onError`**    | Function                                                                                                    | false    |             | Callback function to hook into the `onError` within the Upload instance provided in the `upload` prop.                                          |
| **`striped`**    | Boolean                                                                                                     | false    |             | Triggers the "striped" style in the progress bar.                                                                                               |
| **`animated`**   | Boolean                                                                                                     | false    |             | When `true` the progress bar will have animated stripes while uploading is in progress.                                                         |
| **`color`**      | String                                                                                                      | false    | `"success"` | The color of the progress bar                                                                                                                   |


### Usage

```jsx
import React from 'react';
import { UploadProgressBar } from '@availity/upload';

<UploadProgressBar upload={uploadInstance} animated />;
```

## FilePickerBtn

The raw file picker button which masks the file input with a button.

### Props

| Prop Name              | Types         | Required | Default  | Description                                                                                               |
| -------------          | -------       | -------- | -------- | --------------------------------------------------------------------------------------                    |
| **`onClick`**          | Function      | false    |          | Callback when the button is clicked.                                                                      |
| **`onChange`**         | Function      | false    |          | Callback when the user has selected a file or multiple files.                                             |
| **`multiple`**         | Boolean       | false    |          | Indicates that the user will be allowed to select multiple files when selecting files from the OS prompt. |
| **`allowedFileTypes`** | Array<String> | false    |          | The file types you want to restrict uploading to. eg: `['.jpeg', '.jpg']`.                                |
| **`maxSize`**          | Number        | false    |          | The maximum file size (in bytes) for a file to be uploaded.                                               |

### Usage

```jsx
import React from 'react';
import { FilePickerBtn } from '@availity/upload';

handleFileSelection = event => {
  const { files } = event.target;
  // do something with the files.
};

<FilePickerBtn onChange={this.handleFileSelection} />;
```

## FilePicker

The raw file picker which automatically resets the value of the input, allowing the same file to be selected multiple consecutive files.

### Props

| Prop Name              | Types         | Required | Default  | Description                                                                                               |
| -------------          | -------       | -------- | -------- | --------------------------------------------------------------------------------------                    |
| **`tag`**          | String,Function      | false    | Reactstrap `CustomInput`          | The raw underlying component/element which should be rendered. |
| **`onClick`**         | Function      | false    |          | Callback when the user has selected a file or multiple files.                                             |
| **`multiple`**         | Boolean       | false    |          | Indicates that the user will be allowed to select multiple files when selecting files from the OS prompt. |
| **`allowedFileTypes`** | Array<String> | false    |          | The file types you want to restrict uploading to. eg: `['.jpeg', '.jpg']`.                                |
| **`maxSize`**          | Number        | false    |          | The maximum file size (in bytes) for a file to be uploaded.                                               |

### Usage

```jsx
import React from 'react';
import { FilePicker } from '@availity/upload';
import { CustomInput } from 'reactstrap';

handleFileSelection = event => {
  const { files } = event.target;
  // do something with the files.
};

<FilePicker tag={CustomInput} onChange={this.handleFileSelection} />;
```
